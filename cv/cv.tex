%% https://tex.stackexchange.com/questions/13509/biblatex-in-a-nutshell-for-beginners
\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fontawesome}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{hyperref}
\usepackage[margin=1.5cm]{geometry}
\usepackage{xstring}            % substring matching
\usepackage{xhfill}             % coloured lines
\usepackage{array}
\usepackage[%
   backend=biber,               % bibtex8
   style=numeric,               % authortitle
   giveninits=true,
   maxbibnames=99,
   sorting=ymdnt,               % ydnt tweaked
   sortsets=true,
   defernumbers=true,
   doi=false,
   isbn=false,
   url=false
]{biblatex}

\input{flatui-colours}

\ifxetex
\usepackage{fontspec}
\setmainfont{Source Sans Pro}
\newfontfamily{\sspsb}[UprightFont={* Semibold}]{Source Sans Pro}
% \newfontfamily{\srp}{Source Serif Pro}
\setmonofont[Scale=1]{Fira Code}
\else
\usepackage{charter}
\fi

\hypersetup{%
  colorlinks=true,
  linkcolor={violet!70!black},
  citecolor={YellowOrange!70!black},
  urlcolor=blueGreenD,  % {Aquamarine!70!black},
  pdfborder= 0 0 0,
  bookmarks=false,
  pdftitle={Siddharth Narayanaswamy - CV},
  pdfauthor={Siddharth Narayanaswamy},
  pdfsubject={Curriculum Vitae},
  pdfkeywords={Siddharth Narayanaswamy, resume, cv, mathematics, cs, computer
    science, phd, computer vision, vision, perception, robots, robotics, fMRI,
    cognitive neuroscience, image processing, speech processing, AI, Artificial
    Intelligence, cognitive science, machine learning, functional programming,
    constraint, constraint satisfaction, automatic differentiation, stochastic
    programming, probabilistic programming, stochastic lambda calculus, C++,
    Scheme, Lisp, Haskell, C, Prolog, MATLAB, Java, Python, purdue, oxford}}

\let\oldhref\href
\renewcommand{\href}[3][]{\oldhref[#1]{#2}{\texttt{\footnotesize #3}}}

\usepackage{titlesec}
\titlespacing\subsection{0pt}{5pt plus 3pt minus 2pt}{5pt plus 3pt minus 2pt}
\titlespacing\subsubsection{0pt}{5pt plus 3pt minus 2pt}{5pt plus 3pt minus 2pt}

%%% Biblatex stuff %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% sort descending by year _and_ month
% https://tex.stackexchange.com/questions/140561/anti-chronological-bibliography-with-sorting-ydnt-and-usage-of-sortyear
\DeclareSortingTemplate{ymdnt}{%
  \sort{\field{presort}}
  \sort[final]{\field{sortkey}}
  \sort[direction=descending]{
    \field[strside=left,strwidth=4]{sortyear}
    \field[strside=left,strwidth=4]{year}
    \literal{9999}
  }
  \sort[direction=descending]{
    \field{month}
    \literal{9999}
  }
  \sort{
    \field{sortname}
    \field{author}
    \field{editor}
    \field{translator}
    \field{sorttitle}
    \field{title}
  }
  \sort{
    \field{sorttitle}
    \field{title}
  }
}

% Authors and Title on separate lines --- block=par makes everything on separate lines
\renewcommand*{\labelnamepunct}{\newunitpunct\par}
\renewbibmacro{in:}{%
  \setunit{\space}\newline\ifentrytype{article}{}{\printtext{In\space}}}
% \renewbibmacro{in:}{\par In:}

% Make publication title bold
\DeclareFieldFormat
  [article,inbook,incollection,inproceedings,patent,thesis,unpublished]
  % {title}{\bfseries{#1\isdot}}
  {title}{\ifxetex \sspsb \else \bfseries \fi {#1\isdot}}

% Drop some unnecessary fields
\AtEveryBibitem{\clearlist{location}}

% Stylise the labelling
\DeclareFieldFormat{labelnumberwidth}{{\ifxetex \ttfamily \fi\color{purple}#1}}

\DeclareFieldFormat{labelnumber}{\mkbibdesc{#1}}
\newrobustcmd{\mkbibdesc}[1]{%
  \number\numexpr\csuse{bbx@itemtotal}+1-#1\relax}

\newrobustcmd{\safeaddcat}[1]{%
  \iffieldundef{labelprefix}{%
    \ifcsdef{bbx@count@#1}
    {\csnumgdef{bbx@count@#1}{\csuse{bbx@count@#1}+1} \listbreak}
    {\csnumgdef{bbx@count@#1}{0}}
  }{}
  \addtocategory{#1}{\thefield{entrykey}}
}

\makeatletter
\def\bbx@populatecategory#1{%
  \iftoggle{blx@skipbib}{\listbreak}{}%
  \ifentrytype{article}
  {\IfSubStr{\strfield{journaltitle}}{\detokenize{ArXiv}}
    {\safeaddcat{techreport}}
    {\safeaddcat{journal}}}
  {\ifentrytype{inproceedings}
    {\IfSubStr{\strfield{booktitle}}{\detokenize{Workshop}} % TODO: compare converting lowercase
      {\safeaddcat{workshop}}
      {\safeaddcat{conference}}}
    {\ifentrytype{patent}{\safeaddcat{patent}}{}}}
}
\AtDataInput{\forlistloop{\bbx@populatecategory}{\blx@categories}}
\makeatother

\newcommand{\bibcat}[2]{%
  \ifcsdef{bbx@count@#1}{\csnumgdef{bbx@itemtotal}{\csuse{bbx@count@#1}}}{}
  \uppercase{\def\upcat{#1}}
  \StrChar{\upcat}{1}[\firstc]
  \newrefcontext[labelprefix=\firstc]
  \printbibliography[heading=subbibliography, title=#2 \rline{purple}, category=#1]
}

\DeclareBibliographyCategory{journal}
\DeclareBibliographyCategory{conference}
\DeclareBibliographyCategory{workshop}
\DeclareBibliographyCategory{techreport}
\DeclareBibliographyCategory{patent}

\addbibresource{cv/references.bib}  % needs the cv/ path because of hakyll relative-paths stuff
\defbibheading{subbibliography}[\refname]{\subsubsection*{#1}}
\renewcommand*{\bibfont}{\small}
\setlength\bibitemsep{0.55\itemsep}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\rline}[1]{\hspace*{2ex}\xrfill[0.5ex]{2pt}[#1]\hspace*{0ex}}

\begin{document}

\begin{center}
  \begin{tabular*}{\textwidth}{@{}l@{\extracolsep{\fill}}l@{\,}}
    \textbf{\LARGE{Curriculum Vitae}}
    & \today                                                                        \\*[1.2ex]
    \textbf{\large{Siddharth Narayanaswamy}}
    & \faLink \, \href{http://www.iffsid.com}{www.iffsid.com}                       \\*[0.2ex]
    Department of Engineering Science
    & \faEnvelopeSquare \, \href{mailto:siddharth@iffsid.com}{siddharth@iffsid.com} \\
    University of Oxford
    & \faEnvelopeSquare \, \href{mailto:nsid@robots.ox.ac.uk}{nsid@robots.ox.ac.uk} \\
    Parks Road, Oxford OX1 3PJ, UK
    & \faPhoneSquare \, \textrm{+44 7874 269532}
  \end{tabular*}
\end{center}

% Professional Experience
\subsubsection*{Professional Experience \rline{orange}}

\begin{center}
  \small
  \begin{tabular*}{\textwidth}{@{}r@{,\,\,}l@{\extracolsep{\fill}}>{\itshape}l@{\,}}
    Postdoctoral Research Assistant
    & Department of Engineering Science, University of Oxford
    & Jan 2016 --- present \\
    %
    Postdoctoral Scholar
    & Department of Psychology, Stanford University
    & \,Apr 2014 --- Dec 2015 \\
    %
    Graduate Research Assistant
    & School of Electrical \& Computer Engineering, Purdue University
    & Aug 2008 --- Mar 2014
  \end{tabular*}
\end{center}

% Education
\subsubsection*{Education \rline{orange}}

\begin{center}
  \small
  \begin{tabular*}{\textwidth}{@{}l@{\extracolsep{\fill}}>{\itshape}l@{\,}}
    Doctor of Philosophy (PhD), School of Electrical \& Computer Engineering, Purdue University
    & Aug 2008 --- Mar 2014 \\
    {\ifxetex \sspsb \else \bfseries \fi \quad Thesis: Compositionality in Vision and Language} & \\ [2pt]
    %
    Bachelor of Engineering (BE), Electronics \& Communication, Anna University, India
    & Aug 2004 --- Aug 2008
  \end{tabular*}
\end{center}

% Honours

% % Grants
\subsubsection*{Grants \& Fellowships \rline{yellow}}
\begin{center}
  \small
  \def\s{\hspace*{0.05\linewidth}}
  \begin{tabular*}{1.0\linewidth}{@{\s}>{\bfseries}ll@{\extracolsep{\fill}}>{\itshape}l@{\,}}
    Facebook ParlAI Research Award\, \href{https://research.fb.com/announcing-the-winners-of-the-facebook-parlai-research-awards/}{\faExternalLink}
    & Co-Investigator
    & Oct 2017
  \end{tabular*}
\end{center}

% Publications
\nocite{*}
\bibcat{journal}{Peer-Reviewed Journal Articles}
\bibcat{conference}{Peer-Reviewed Conference Proceedings}
% Chapters
% Books
\bibcat{techreport}{Technical Reports}
\bibcat{workshop}{Workshop Publications}
\bibcat{patent}{Patents}
% Software

% Popular Press

% Invited Presentations
\subsubsection*{Invited Presentations \rline{blue}}
\begin{center}
  \small
  \begin{tabular*}{\textwidth}{@{}ll@{\extracolsep{\fill}}>{\itshape}l@{\,}}
    \href{https://www.dagstuhl.de/program/calendar/partlist/?semnr=19021\&SUOG}{Seminar on Joint Processing of Language and Visual Data}
    & Dagstuhl
    & Jan 2019 \\
    \href{https://sites.google.com/site/sitcomfoundations/program}{Foundations of Situated and Multimodal Communication}
    & IWCS, Montepellier
    & Sept 2017 \\
    %
    \href{http://talks.bham.ac.uk/talk/index/2667}{Artificial Intelligence and Natural Computation Seminar}
    & University of Birmingham
    & May 2017 \\
    %
    \href{https://www.turing.ac.uk/events}{ATI Probabilistic Programming Workshop}
    & Alan Turing Institute
    & Feb 2016 \\
    %
    \href{http://talks.bham.ac.uk/talk/index/1183}{Artificial Intelligence and Natural Computation Seminar}
    & University of Birmingham
    & Sept 2013 \\
    %
    \href{http://www.sussex.ac.uk/cogs/seminars/previous/autumn2013}{COGS Research Seminar}
    & University of Sussex
    & Oct 2013 \\
    %
    \href{http://talks.cam.ac.uk/talk/index/47407}{Machine Learning and Perception Seminar}
    & Microsoft Research (Cambridge)
    & Oct 2013
  \end{tabular*}
\end{center}

% Professional Services
\subsubsection*{Professional Services \rline{blue}}
\begin{center}
  \small
  \begin{tabular*}{\textwidth}{@{}ll@{\extracolsep{\fill}\,}}
    Journal Reviewer
    &
      \href{http://www.computer.org/portal/web/tpami}{PAMI},
      \href{http://link.springer.com/journal/11263}{IJCV},
      \href{http://www.journals.elsevier.com/pattern-recognition-letters/}{PRL}
    \\
    Conference Reviewer
    &
      \href{http://www.aaai.org/home.html}{AAAI},
      \href{http://www.pamitc.org/cvpr14/}{CVPR},
      \href{http://www.icra2014.com/}{ICRA},
      \href{http://www.icdl-epirob.org/}{ICDL},
      \href{http://www.iclr.cc/}{ICLR},
      \href{http://www.icml.cc/}{ICML},
      \href{http://ijcai-16.org/}{IJCAI}
    \\
    Co-Organiser
    & \href{http://languageandvision.com/}{Language and Vision Workshop} --- CVPR 2015, 2017, 2018 \\
    Co-Organiser
    & \href{https://sites.google.com/view/disentanglenips2017}{Learning Disentangled Representations} --- NIPS 2017 \\
    PC Member
    & \href{http://ijcai-16.org/index.php/welcome/view/program_committee}{IJCAI 2016}
  \end{tabular*}
\end{center}

% Outreach

% Teaching
% \subsubsection*{Teaching \rline{blue}}
% \begin{center}
%   \small
%   \begin{tabular*}{\textwidth}{@{}ll@{\extracolsep{\fill}}>{\itshape}l@{\,}}
%     \href{https://engineering.purdue.edu/~ee570}{EE570} Artificial Intelligence
%     & TA (Unofficial), Jeffrey Mark Siskind, Purdue University
%     & 2008 --- 2012 \\
%     \href{https://engineering.purdue.edu/~ee473}{EE473} Introduction to Artificial Intelligence
%     & TA (Unofficial), Jeffrey Mark Siskind, Purdue University
%     & 2008 --- 2012
%   \end{tabular*}
% \end{center}

% Supervision

% % Other
% \subsubsection*{Other \rline{green}}
% \begin{compactitem}
% \item[] Consulting?
% \item[] \textbf{Primary Operator} --- 3T MRI Scanner - InnerVision West - Purdue University
% \item[] \textbf{Member, IEEE}
% \end{compactitem}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
